<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex,nofollow,noarchive">
<link rel="stylesheet" type="text/css" href="../assets/css/bootstrap/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="../assets/css/app.min.css">
</head>

<body class="view about">
<h1 class="page-header">About</h1>

<section class="page-section">
<div class="row">
<div class="col-xs-3 col-md-1">
  <span class="appe">&#123;appe&#125;</span>
</div>
<div class="col-xs-9 col-md-8 col-lg-9">
  <p class="text-muted"></p>
</div>
</div>

<div class="page-block">
  <p id="appe"><strong>&#123;appe&#125;</strong>Â {release}</p>
  <p>2018 &copy; Leonardo Laureti</p>
</div>
</section>

<hr>

<section class="page-section">
<h5>Running application</h5>

<p id="app-name" class="lead">{app}</p>

<table id="table-data" class="table table-bordered table-auto table-data">
  <tbody>
    <tr>
      <td>File loaded</td>
      <td>{file_name}</td>
    </tr>
    <tr>
      <td>File version</td>
      <td>{file_version}</td>
    </tr>
    <tr>
      <td>File checksum</td>
      <td>{file_checksum}</td>
    </tr>
  </tbody>
</table>
</section>


<section class="page-section">
<h5>Application license</h5>

<p>{license}</p>

<iframe class="license">
</section>


<script type="text/javascript" src="../assets/js/app.min.js"></script>

<script type="text/javascript" src="../config.js"></script>


<script type="text/javascript">
var control = {};

control.openView = function() {
  var data_file = window.store[config.app]['file'];
  var appe = app.getVersion();

  if (! data_file || ! appe) {
    return app.error(null, [ 'informazioni', 'control.openView' ]);
  }

  var view_title = document.getElementById('view-title');

  var appe_ver = document.getElementById('appe');
  appe_ver.innerHTML = appe_ver.innerHTML.replace('{release}', appe.release);

  var app_name = document.getElementById('app-name');
  app_name.innerHTML = config.title;

  var app_file_name = app.os.getLastFileName(config) || 'n.d.';
  var app_file_version = data_file.version || 'n.d.'; //TODO
  var app_file_checksum = 'n.d.'; //TODO

  control.temp = {};

  var tbody = document.querySelector('#table-data > tbody');
  tbody.classList.remove('tpl');

  var blob = tbody.innerHTML;

  blob = blob.replace('{file_name}', app_file_name)
    .replace('{file_version}', app_file_version)
    .replace('{file_checksum}', app_file_checksum);

  tbody.innerHTML = blob;

  if ('matchMedia' in window) {
    var wab_btn = document.querySelector('.btn-wab');

    if (matchMedia('(min-width: 1200px)').matches) {
      wab_btn.setAttribute('data-mobile-href', wab_btn.href);
      wab_btn.setAttribute('href', wab_btn.getAttribute('data-desktop-href'));
    }
  }

  app.view.resizeView(false);
}


window.store = {};

app.load(app.view.load);
app.utils.addEvent('resize', window, app.view.resizeView);
app.utils.addEvent('orientationchange', window, app.view.resizeView);
</script>
</body>
</html>